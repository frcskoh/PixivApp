{% extends "base.html" %}

{% block scripts %}
  {{ super() }}
  <script>
    var key_word = "";
    function update()
    {
        key_word = $("#key_box").val();
    }
    function receive(submit_key_word, page)
    {
        $("#progress").fadeIn()
        $("#indeterminate").fadeIn()
        $("#key_word_box").text(submit_key_word);
        $.get('/search/' + '{"key" : "' + submit_key_word + '" ,' + '"page" : ' + page + '}', 
        function(data){
            $("#progress").fadeOut()
            $("#indeterminate").fadeOut()
            $("#title").text("Pixiv : " + submit_key_word);
            $("#content").html(data);
            for (var i = 0; i <= parseInt($("#num").text()); i++)
            {
                $("#card_" + i.toString()).fadeIn("slow")
            }
        })
    }
    
    function load(order)
    {
        var save_src = $("#img_" + order).attr("name");
        var ID = $("#card_" + order).attr("name");
        
        window.location.href = '/image/' + '{"save_src" : "' + save_src + '" ,' + '"ID" : "' + ID + '"}';
    }
    
    $("#submit").click(
    function ()
    {
        receive(key_word, '1')
    });
  </script>
{% endblock %}
